!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Console=t():e.Console=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";var o,r,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,a){"object"===s(t)&&"undefined"!=typeof e?a(t):(r=[t],o=a,i="function"==typeof o?o.apply(t,r):o,!(void 0!==i&&(e.exports=i)))}(void 0,function(e){function t(e,t,n){this.nodeName=e,this.attributes=t,this.children=n,this.key=t&&t.key}function n(e,n){var o=void 0,r=void 0,i=void 0,s=void 0,a=void 0;for(a=arguments.length;a-- >2;)W.push(arguments[a]);for(n&&n.children&&(W.length||W.push(n.children),delete n.children);W.length;)if((i=W.pop())instanceof Array)for(a=i.length;a--;)W.push(i[a]);else null!=i&&i!==!0&&i!==!1&&("number"==typeof i&&(i=String(i)),s="string"==typeof i,s&&r?o[o.length-1]+=i:((o||(o=[])).push(i),r=s));var l=new t(e,n||void 0,o||z);return A.vnode&&A.vnode(l),l}function o(e,t){if(t)for(var n in t)e[n]=t[n];return e}function r(e){return o({},e)}function i(e,t){for(var n=t.split("."),o=0;o<n.length&&e;o++)e=e[n[o]];return e}function a(e){return"function"==typeof e}function l(e){return"string"==typeof e}function u(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}function c(e,t){return n(e.nodeName,o(r(e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)}function f(e,t,n){var o=t.split(".");return function(t){for(var r=t&&t.target||this,s={},a=s,u=l(n)?i(t,n):r.nodeName?r.type.match(/^che|rad/)?r.checked:r.value:t,c=0;c<o.length-1;c++)a=a[o[c]]||(a[o[c]]=!c&&e.state[o[c]]||{});a[o[c]]=u,e.setState(s)}}function p(e){!e._dirty&&(e._dirty=!0)&&1==ee.push(e)&&(A.debounceRendering||G)(d)}function d(){var e=void 0,t=ee;for(ee=[];e=t.pop();)e._dirty&&U(e)}function h(e){var t=e&&e.nodeName;return t&&a(t)&&!(t.prototype&&t.prototype.render)}function m(e,t){return e.nodeName(b(e),t||X)}function v(e,t){return l(t)?e instanceof Text:l(t.nodeName)?!e._componentConstructor&&y(e,t.nodeName):a(t.nodeName)?!e._componentConstructor||e._componentConstructor===t.nodeName||h(t):void 0}function y(e,t){return e.normalizedNodeName===t||R(e.nodeName)===R(t)}function b(e){var t=r(e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function g(e){var t=e.parentNode;t&&t.removeChild(e)}function _(e,t,n,o,r){if("className"===t&&(t="class"),"class"===t&&o&&"object"===("undefined"==typeof o?"undefined":s(o))&&(o=u(o)),"key"===t);else if("class"!==t||r)if("style"===t){if((!o||l(o)||l(n))&&(e.style.cssText=o||""),o&&"object"===("undefined"==typeof o?"undefined":s(o))){if(!l(n))for(var i in n)i in o||(e.style[i]="");for(var i in o)e.style[i]="number"!=typeof o[i]||Z[i]?o[i]:o[i]+"px"}}else if("dangerouslySetInnerHTML"===t)o&&(e.innerHTML=o.__html||"");else if("o"==t[0]&&"n"==t[1]){var c=e._listeners||(e._listeners={});t=R(t.substring(2)),o?c[t]||e.addEventListener(t,w,!!$[t]):c[t]&&e.removeEventListener(t,w,!!$[t]),c[t]=o}else if("list"!==t&&"type"!==t&&!r&&t in e)x(e,t,null==o?"":o),null!=o&&o!==!1||e.removeAttribute(t);else{var f=r&&t.match(/^xlink\:?(.+)/);null==o||o===!1?f?e.removeAttributeNS("http://www.w3.org/1999/xlink",R(f[1])):e.removeAttribute(t):"object"===("undefined"==typeof o?"undefined":s(o))||a(o)||(f?e.setAttributeNS("http://www.w3.org/1999/xlink",R(f[1]),o):e.setAttribute(t,o))}else e.className=o||""}function x(e,t,n){try{e[t]=n}catch(e){}}function w(e){return this._listeners[e.type](A.event&&A.event(e)||e)}function C(e){if(g(e),e instanceof Element){e._component=e._componentConstructor=null;var t=e.normalizedNodeName||R(e.nodeName);(te[t]||(te[t]=[])).push(e)}}function k(e,t){var n=R(e),o=te[n]&&te[n].pop()||(t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e));return o.normalizedNodeName=n,o}function S(){for(var e=void 0;e=ne.pop();)A.afterMount&&A.afterMount(e),e.componentDidMount&&e.componentDidMount()}function N(e,t,n,o,r,i){oe++||(re=r&&"undefined"!=typeof r.ownerSVGElement,ie=e&&!(Y in e));var s=j(e,t,n,o);return r&&s.parentNode!==r&&r.appendChild(s),--oe||(ie=!1,i||S()),s}function j(e,t,n,o){for(var r=t&&t.attributes&&t.attributes.ref;h(t);)t=m(t,n);if(null==t&&(t=""),l(t))return e&&e instanceof Text&&e.parentNode?e.nodeValue!=t&&(e.nodeValue=t):(e&&E(e),e=document.createTextNode(t)),e;if(a(t.nodeName))return M(e,t,n,o);var i=e,s=String(t.nodeName),u=re,c=t.children;if(re="svg"===s||"foreignObject"!==s&&re,e){if(!y(e,s)){for(i=k(s,re);e.firstChild;)i.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(i,e),E(e)}}else i=k(s,re);var f=i.firstChild,p=i[Y];if(!p){i[Y]=p={};for(var d=i.attributes,v=d.length;v--;)p[d[v].name]=d[v].value}return!ie&&c&&1===c.length&&"string"==typeof c[0]&&f&&f instanceof Text&&!f.nextSibling?f.nodeValue!=c[0]&&(f.nodeValue=c[0]):(c&&c.length||f)&&O(i,c,n,o,!!p.dangerouslySetInnerHTML),P(i,t.attributes,p),r&&(p.ref=r)(i),re=u,i}function O(e,t,n,o,r){var i=e.childNodes,s=[],a={},l=0,u=0,c=i.length,f=0,p=t&&t.length,d=void 0,h=void 0,m=void 0,y=void 0;if(c)for(var b=0;b<c;b++){var _=i[b],x=_[Y],w=p?(h=_._component)?h.__key:x?x.key:null:null;null!=w?(l++,a[w]=_):(ie||r||x||_ instanceof Text)&&(s[f++]=_)}if(p)for(var b=0;b<p;b++){m=t[b],y=null;var w=m.key;if(null!=w)l&&w in a&&(y=a[w],a[w]=void 0,l--);else if(!y&&u<f)for(d=u;d<f;d++)if(h=s[d],h&&v(h,m)){y=h,s[d]=void 0,d===f-1&&f--,d===u&&u++;break}y=j(y,m,n,o),y&&y!==e&&(b>=c?e.appendChild(y):y!==i[b]&&(y===i[b+1]&&g(i[b]),e.insertBefore(y,i[b]||null)))}if(l)for(var b in a)a[b]&&E(a[b]);for(;u<=f;)y=s[f--],y&&E(y)}function E(e,t){var n=e._component;if(n)L(n,!t);else{e[Y]&&e[Y].ref&&e[Y].ref(null),t||C(e);for(var o=void 0;o=e.lastChild;)E(o,t)}}function P(e,t,n){var o=void 0;for(o in n)t&&o in t||null==n[o]||_(e,o,n[o],n[o]=void 0,re);if(t)for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e[o]:n[o])||_(e,o,n[o],n[o]=t[o],re)}function D(e){var t=e.constructor.name,n=se[t];n?n.push(e):se[t]=[e]}function H(e,t,n){var o=new e(t,n),r=se[e.name];if(I.call(o,t,n),r)for(var i=r.length;i--;)if(r[i].constructor===e){o.nextBase=r[i].nextBase,r.splice(i,1);break}return o}function T(e,t,n,o,r){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||r?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==K&&(n!==q&&A.syncComponentUpdates===!1&&e.base?p(e):U(e,q,r)),e.__ref&&e.__ref(e))}function U(e,t,n,i){if(!e._disable){var s=void 0,l=void 0,u=e.props,c=e.state,f=e.context,p=e.prevProps||u,d=e.prevState||c,v=e.prevContext||f,y=e.base,g=e.nextBase,_=y||g,x=e._component,w=void 0,C=void 0;if(y&&(e.props=p,e.state=d,e.context=v,t!==J&&e.shouldComponentUpdate&&e.shouldComponentUpdate(u,c,f)===!1?s=!0:e.componentWillUpdate&&e.componentWillUpdate(u,c,f),e.props=u,e.state=c,e.context=f),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!s){for(e.render&&(l=e.render(u,c,f)),e.getChildContext&&(f=o(r(f),e.getChildContext()));h(l);)l=m(l,f);var k=l&&l.nodeName,j=void 0,O=void 0;if(a(k)){var P=b(l);w=x,w&&w.constructor===k&&P.key==w.__key?T(w,P,q,f):(j=w,w=H(k,P,f),w.nextBase=w.nextBase||g,w._parentComponent=e,e._component=w,T(w,P,K,f),U(w,q,n,!0)),O=w.base}else C=_,j=x,j&&(C=e._component=null),(_||t===q)&&(C&&(C._component=null),O=N(C,l,f,n||!y,_&&_.parentNode,!0));if(_&&O!==_&&w!==x){var D=_.parentNode;D&&O!==D&&(D.replaceChild(O,_),j||(_._component=null,E(_)))}if(j&&L(j,O!==_),e.base=O,O&&!i){for(var M=e,I=e;I=I._parentComponent;)(M=I).base=O;O._component=M,O._componentConstructor=M.constructor}}!y||n?ne.unshift(e):s||(e.componentDidUpdate&&e.componentDidUpdate(p,d,v),A.afterUpdate&&A.afterUpdate(e));var B=e._renderCallbacks,W=void 0;if(B)for(;W=B.pop();)W.call(e);oe||i||S()}}function M(e,t,n,o){for(var r=e&&e._component,i=r,s=e,a=r&&e._componentConstructor===t.nodeName,l=a,u=b(t);r&&!l&&(r=r._parentComponent);)l=r.constructor===t.nodeName;return r&&l&&(!o||r._component)?(T(r,u,Q,n,o),e=r.base):(i&&!a&&(L(i,!0),e=s=null),r=H(t.nodeName,u,n),e&&!r.nextBase&&(r.nextBase=e,s=null),T(r,u,q,n,o),e=r.base,s&&e!==s&&(s._component=null,E(s))),e}function L(e,t){A.beforeUnmount&&A.beforeUnmount(e);var n=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var o=e._component;if(o)L(o,t);else if(n){n[Y]&&n[Y].ref&&n[Y].ref(null),e.nextBase=n,t&&(g(n),D(e));for(var r=void 0;r=n.lastChild;)E(r,!t)}e.__ref&&e.__ref(null),e.componentDidUnmount&&e.componentDidUnmount()}function I(e,t){this._dirty=!0,this.context=t,this.props=e,this.state||(this.state={})}function B(e,t,n){return N(n,e,{},!1,t)}var A={},W=[],z=[],F={},R=function(e){return F[e]||(F[e]=e.toLowerCase())},V="undefined"!=typeof Promise&&Promise.resolve(),G=V?function(e){V.then(e)}:setTimeout,K=0,q=1,J=2,Q=3,X={},Y="undefined"!=typeof Symbol?Symbol.for("preactattr"):"__preactattr_",Z={boxFlex:1,boxFlexGroup:1,columnCount:1,fillOpacity:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,fontWeight:1,lineClamp:1,lineHeight:1,opacity:1,order:1,orphans:1,strokeOpacity:1,widows:1,zIndex:1,zoom:1},$={blur:1,error:1,focus:1,load:1,resize:1,scroll:1},ee=[],te={},ne=[],oe=0,re=!1,ie=!1,se={};o(I.prototype,{linkState:function(e,t){var n=this._linkedStates||(this._linkedStates={});return n[e+t]||(n[e+t]=f(this,e,t))},setState:function(e,t){var n=this.state;this.prevState||(this.prevState=r(n)),o(n,a(e)?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),p(this)},forceUpdate:function(){U(this,J)},render:function(){}}),e.createElement=n,e.h=n,e.cloneElement=c,e.Component=I,e.render=B,e.rerender=d,e.options=A,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),l=n(2),u=[],c=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={visible:!1},u.push(n),n}return i(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.hotkeyListener=window.addEventListener("keyup",function(t){t.keyCode===e.props.config.hotkey&&e.toggle()})}},{key:"toggle",value:function(e){var t=this,n={on:!0,off:!1}[e]||!this.state.visible;n===!0&&(this.cmdInput.value="",u.forEach(function(e){e!==t&&e.setState({visible:!1},e.props.config.onHide)})),this.setState({visible:n},function(){var e=t.props.config,o=e.onShow,r=e.onHide;n?o(t):r(t),n?t.cmdInput.focus():t.cmdInput.blur()})}},{key:"onKeydown",value:function(e){switch(e.keyCode){case this.props.config.hotkey:e.preventDefault();break;case 13:this.props.dispatch(e.target.value),this.cmdInput.value="",e.stopPropagation();break;case 9:var t=this.cmdInput.value;this.cmdInput.value=this.props.autoCompleteFn(t),e.preventDefault();break;case 38:this.historySearch("backward");break;case 40:this.historySearch("forward")}}},{key:"historySearch",value:function(e){console.log("historySearch",e)}},{key:"render",value:function(e,t){var n=this,o=Object.assign({},f.panel,{visibility:t.visible?"visible":"hidden",marginTop:t.visible?"0px":"-"+f.panel.height});return a.createElement("label",{style:o},a.createElement(l,{logs:e.history}),a.createElement("input",{autoFocus:!0,ref:function(e){n.cmdInput=e},style:f.input,onkeydown:this.onKeydown.bind(this)}))}}]),t}(a.Component),f={panel:{zIndex:99999,display:"block",overflow:"hidden",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"fixed",top:0,left:0,width:"100%",height:parseInt(window.innerHeight/2)+"px",transition:"margin-top 100ms ease-out",font:"14px/20px Menlo,monospace",color:"#DDD"},input:{outline:0,border:0,color:"#DDD",font:"14px/20px Menlo,monospace",backgroundColor:"transparent",position:"absolute",bottom:0,width:"100%",lineHeight:"16px",padding:"4px 5px"}};e.exports=c},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(0),l=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"renderLogs",value:function(e){var t=[];return e.forEach(function(e){e.ins&&t.push(a.createElement("dt",{style:u.cmd},e.ins)),e.msg&&t.push(a.createElement("dd",{style:u.msg},e.msg))}),t}},{key:"render",value:function(e){return a.createElement("dl",{style:u.panelHistory},this.renderLogs(e.logs))}}]),t}(a.Component),u={panelHistory:{margin:0,padding:"2px 5px",boxSizing:"border-box",position:"absolute",width:"100%",letterSpacing:".05em",bottom:"18px"},msg:{margin:0,color:"#DDD",whiteSpace:"pre"},cmd:{margin:0,color:"#7E0"}};e.exports=l},function(e,t,n){"use strict";function o(e){return Array.isArray(e)?e:Array.from(e)}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(this.config=Object.assign({},c,e),this.history=[],this.handlers={},this.log(this.config.welcome),t)for(var n in t)this.register(n,t[n],t[n].config);return this._render(),this}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a=n(0),l=n(1),u=function(){},c={hotkey:192,welcome:"",onShow:u,onHide:u,defaultHandler:u,caseSensitive:!1,autoComplete:!0};r.prototype._render=function(){var e=this,t={config:this.config,history:this.history,dispatch:this.dispatch.bind(this),autoCompleteFn:this.autoComplete.bind(this)},n=a.createElement(l,s({ref:function(t){return e.panel=t}},t));return this.element=a.render(n,document.body,this.element),this},r.prototype.toggle=function(e){this.panel.toggle(e)},r.prototype.log=function(e,t){this.history.push({ins:t,msg:e}),this._render()},r.prototype.clear=function(){for(;this.history.length;)this.history.shift();this._render()},r.prototype.register=function(e,t,n){return"function"==typeof e?this.config.defaultHandler=e:"string"==typeof e&&"function"==typeof t&&(!this.config.caseSensitive&&(e=e.toLowerCase()),this.handlers[e]={cmd:e,fn:t,cfg:n}),this},r.prototype.autoComplete=function(e){if("function"==typeof this.config.autoComplete)return this.config.autoComplete(e);if(this.config.autoComplete){var t=Object.keys(this.handlers),n=t.filter(function(t){return 0===t.indexOf(e)});return 1===n.length?n[0]:(this.log(e),this.log(n.map(function(e){return"  "+e}).join("\n")),e)}},r.prototype.dispatch=function(e){var t=e.split(" "),n=o(t),r=n[0],s=n.slice(1);r=this.config.caseSensitive?r:r.toLowerCase(),s=s.join(" ");var a=void 0,l=this.handlers[r];"object"===("undefined"==typeof l?"undefined":i(l))&&"function"==typeof l.fn?a=l.fn(s):this.config.defaultHandler&&(a=this.config.defaultHandler(s)),this.log(a,e),this._render()},r.prototype.destroy=function(){a.render("",document.body,this.element),this.element=null},e.exports=r}])});